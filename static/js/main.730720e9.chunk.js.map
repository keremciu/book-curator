{"version":3,"sources":["utils/useFetch.js","setup/AuthProvider.js","setup/theme.js","components/ErrorMessage/styles.js","components/ErrorMessage/index.js","components/Loading/index.js","pages/Home.js","pages/Book.js","pages/Discovery.js","utils/aggregateData.js","setup/Router.js","components/Frame/styles.js","components/Frame/index.js","AppWrapper.js","index.js"],"names":["baseUrl","process","apiFetch","url","options","fetch","concat","then","resp","json","data","catch","err","useFetch","arguments","length","undefined","_React$useState","React","useState","_React$useState2","Object","slicedToArray","response","setResponse","_React$useState3","_React$useState4","error","setError","_React$useState5","_React$useState6","loading","setLoading","useEffect","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_ref2","_ref3","wrap","_context","prev","next","sent","stop","apply","this","asyncFetch","AuthContext","createContext","initialAuthData","ensureAuth","setAuthData","userData","_x","useAuthContext","useContext","AuthProvider","props","_useState","_useState2","authData","onLogout","onLogin","_ref4","_callee2","_context2","authObject","useMemo","react_default","createElement","Provider","assign","value","theme","createMuiTheme","palette","primary","main","secondary","red","A400","background","default","grey","100","type","ErrorWrapper","styled","div","_templateObject","ErrorMessage","SnackbarContent","message","Error_default","Loading","isLoading","Box","p","Grid","container","spacing","direction","alignItems","justify","style","height","CircularProgress","size","HomePage","location","_useAuthContext","_useState3","_useState4","_useState5","_useState6","redirectToReferrer","setRedirectToReferrer","from","state","pathname","access_type","react_router","to","components_Loading","components_ErrorMessage","handleLogin","_ref5","method","status","Button","variant","color","onClick","CTA","Book_templateObject","Book","match","bookID","params","id","_useFetch","book","Paper","Typography","component","mb","title","content","TabPanel","children","activeTab","index","other","objectWithoutProperties","role","hidden","aria-labelledby","Discovery","useTheme","matchesPhone","useMediaQuery","breakpoints","down","setActiveTab","bookResponse","categories","categoriesWithBooks","books","reduce","mem","input","bookArray","book_ids","map","find","b","push","getCategoriesWithBooks","item","md","xs","Tabs","orientation","onChange","e","tabIndex","aria-label","category","Tab","key","label","bookIndex","react_router_dom","Grow","in","timeout","Card","CardActionArea","CardMedia","image","image_url","CardContent","PrivateRoute","Component","rest","render","user_id","Router","exact","path","Home","Router_PrivateRoute","Wrapper","styles_templateObject","MainContent","_templateObject2","Frame","CssBaseline","AppBar","elevation","Container","maxWidth","Toolbar","flexGrow","Chip","react","RouterLink","App","basename","setup_AuthProvider","ThemeProvider","components_Frame","setup_Router","ReactDOM","AppWrapper","document","getElementById"],"mappings":"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","file":"static/js/main.730720e9.chunk.js","sourcesContent":["import React from \"react\";\n\nconst baseUrl = process.env.REACT_APP_API_BASE;\n\nexport function apiFetch(url, options) {\n  return fetch(`${baseUrl}/${url}`, options)\n    .then(resp => resp.json()) // TODO: we can handle response.status errors here\n    .then(data => {\n      return [null, data];\n    })\n    .catch(err => [err]);\n}\n\nconst useFetch = (url, options = {}) => {\n  const [response, setResponse] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const [loading, setLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    setError(null);\n    setLoading(true);\n    const asyncFetch = async () => {\n      const [error, response] = await apiFetch(url, options);\n      if (error) setError(error);\n      setResponse(response);\n      setLoading(false);\n    };\n    asyncFetch();\n  }, []);\n\n  return { response, error, loading };\n};\n\nexport default useFetch;\n","import React, {\n  createContext,\n  useState,\n  useEffect,\n  useMemo,\n  useContext\n} from \"react\";\nimport { apiFetch } from \"utils/useFetch\";\n\nexport const AuthContext = createContext(null);\n\nconst initialAuthData = {};\n\nconst ensureAuth = async setAuthData => {\n  const [err, userData] = await apiFetch(\"me\");\n  if (err) setAuthData(err);\n  setAuthData(userData);\n};\n\nconst AuthProvider = props => {\n  const [authData, setAuthData] = useState(initialAuthData);\n\n  useEffect(() => {\n    ensureAuth(setAuthData);\n  }, []);\n\n  const onLogout = () => setAuthData(initialAuthData);\n\n  const onLogin = async () => {\n    ensureAuth(setAuthData);\n  };\n\n  const authObject = useMemo(() => ({ authData, onLogin, onLogout }), [\n    authData\n  ]);\n\n  return <AuthContext.Provider value={authObject} {...props} />;\n};\n\nexport const useAuthContext = () => useContext(AuthContext);\n\nexport default AuthProvider;\n","import { red } from \"@material-ui/core/colors\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#68E181\"\n    },\n    secondary: {\n      main: \"#19857b\"\n    },\n    error: {\n      main: red.A400\n    },\n    background: {\n      default: \"#fff\"\n    },\n    grey: {\n      100: \"#F1F6F4\"\n    },\n    type: \"light\"\n  }\n});\n\nexport default theme;\n","import styled from \"styled-components\";\n\nconst ErrorWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nexport { ErrorWrapper };\n","import React from \"react\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport { ErrorWrapper } from \"./styles\";\n\nconst ErrorMessage = ({ error }) =>\n  error && (\n    <SnackbarContent\n      message={\n        <ErrorWrapper>\n          <ErrorIcon />\n          {error.message}\n        </ErrorWrapper>\n      }\n    />\n  );\n\nexport default ErrorMessage;\n","import React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\n\nconst Loading = ({ isLoading }) =>\n  isLoading && (\n    <Box p={3}>\n      <Grid\n        container\n        spacing={1}\n        direction=\"column\"\n        alignItems=\"center\"\n        justify=\"center\"\n        style={{ height: 200 }}\n      >\n        <CircularProgress size={100} />\n      </Grid>\n    </Box>\n  );\n\nexport default Loading;\n","import React, { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { useAuthContext } from \"setup/AuthProvider\";\nimport ErrorMessage from \"components/ErrorMessage\";\nimport Loading from \"components/Loading\";\nimport { apiFetch } from \"utils/useFetch\";\n\nconst HomePage = ({ location }) => {\n  const { onLogin, authData } = useAuthContext();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [redirectToReferrer, setRedirectToReferrer] = useState(false);\n  const { from } = location.state || { from: { pathname: \"/discovery\" } };\n\n  useEffect(() => {\n    if (authData.access_type) {\n      // it's waiting the response of ensureAuth then redirect to discovery\n      setRedirectToReferrer(true);\n    }\n  }, [authData]);\n\n  if (redirectToReferrer) return <Redirect to={from} />;\n  if (loading) return <Loading isLoading />;\n  if (error) return <ErrorMessage error={error} />;\n\n  const handleLogin = async () => {\n    setLoading(true);\n    const [err, userData] = await apiFetch(\"auth\", {\n      method: \"POST\"\n    });\n    if (err) setError(err);\n    if (userData.status === \"success\") {\n      onLogin();\n      setLoading(false);\n      setRedirectToReferrer(true);\n    }\n  };\n\n  return (\n    <Grid\n      container\n      spacing={1}\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      style={{ height: 400 }}\n    >\n      <Button\n        variant=\"contained\"\n        size=\"large\"\n        color=\"primary\"\n        onClick={handleLogin}\n      >\n        Login\n      </Button>\n    </Grid>\n  );\n};\n\nexport default HomePage;\n","import React from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport styled from \"styled-components\";\n\nimport { useAuthContext } from \"setup/AuthProvider\";\nimport ErrorMessage from \"components/ErrorMessage\";\nimport Loading from \"components/Loading\";\n\nimport useFetch from \"utils/useFetch\";\n\nconst Book = ({ match }) => {\n  const { authData } = useAuthContext();\n  const bookID = match.params.id;\n  const { response: book, error, loading } = useFetch(`books/${bookID}`);\n  if (loading) return <Loading isLoading />;\n  if (error) return <ErrorMessage error={error} />;\n  // IDEA: we can put suspense to parent and handle loading there.\n  if (!book) return null;\n  return (\n    <Paper>\n      <Box p={3}>\n        <Typography variant=\"h2\" component=\"h2\">\n          <Box mb={4}>{book.title}</Box>\n        </Typography>\n        <Typography component=\"p\">{book.content}</Typography>\n        {authData.access_type === \"free\" && (\n          <CTA>\n            <Button variant=\"contained\" size=\"large\" color=\"primary\">\n              Subscribe to read\n            </Button>\n          </CTA>\n        )}\n      </Box>\n    </Paper>\n  );\n};\n\nconst CTA = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: -300px;\n  min-height: 400px;\n  background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));\n  position: relative;\n  z-index: 1000;\n`;\n\nexport default Book;\n","import React, { useState } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Box from \"@material-ui/core/Box\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Grow from \"@material-ui/core/Grow\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport Loading from \"components/Loading\";\nimport ErrorMessage from \"components/ErrorMessage\";\nimport useFetch from \"utils/useFetch\";\nimport { getCategoriesWithBooks } from \"utils/aggregateData\";\n\nimport { useTheme } from \"@material-ui/core/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\n\nfunction TabPanel({ children, activeTab, index, ...other }) {\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={activeTab !== index}\n      id={`vertical-tabpanel-${index}`}\n      aria-labelledby={`vertical-tab-${index}`}\n      {...other}\n    >\n      <Box p={2}>{children}</Box>\n    </Typography>\n  );\n}\n\nconst Discovery = () => {\n  const theme = useTheme();\n  const matchesPhone = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const [activeTab, setActiveTab] = useState(0);\n  const { response, error, loading } = useFetch(\"categories\");\n  const { response: bookResponse } = useFetch(\"books\");\n\n  // this two calls are nice example to put some memoize stuff.\n\n  if (loading) return <Loading isLoading />;\n  if (error) return <ErrorMessage error={error} />;\n  // IDEA: we can put suspense to parent and handle loading there.\n  if (!response || !bookResponse) return null;\n\n  const { categories } = response;\n  const { books } = bookResponse;\n  const categoriesWithBooks = getCategoriesWithBooks(categories, books);\n\n  const changeTab = (e, tabIndex) => setActiveTab(tabIndex);\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item md={3} xs={12}>\n        <Paper>\n          <Tabs\n            orientation={matchesPhone ? \"horizontal\" : \"vertical\"}\n            variant=\"scrollable\"\n            value={activeTab}\n            onChange={changeTab}\n            aria-label=\"Categories\"\n          >\n            {categories.map(category => (\n              <Tab key={category.id} label={category.title} id={category.id} />\n            ))}\n          </Tabs>\n        </Paper>\n      </Grid>\n      <Grid item md={9}>\n        <Paper>\n          {categoriesWithBooks.map((category, index) => (\n            <TabPanel key={category.id} activeTab={activeTab} index={index}>\n              <Grid container spacing={2}>\n                {category.books.map((book, bookIndex) => (\n                  <Grid key={book.id} item md={3} xs={6}>\n                    <RouterLink to={`/book/${book.id}`}>\n                      <Grow\n                        in={index === activeTab}\n                        timeout={(bookIndex + 1) * 440}\n                      >\n                        <Card>\n                          <CardActionArea>\n                            <CardMedia\n                              image={book.image_url}\n                              title={book.title}\n                              style={{ height: 140 }}\n                            />\n                            <CardContent>\n                              <Typography component=\"h6\">\n                                {book.title}\n                              </Typography>\n                            </CardContent>\n                          </CardActionArea>\n                        </Card>\n                      </Grow>\n                    </RouterLink>\n                  </Grid>\n                ))}\n              </Grid>\n            </TabPanel>\n          ))}\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Discovery;\n","// TODO: we can put a lot of improvements here to memoize data aggregation.\n// We already have kinda hash map in our response.\nconst getCategoriesWithBooks = (categories, books) =>\n  categories.reduce((mem, input) => {\n    const bookArray = input.book_ids.map(bookID =>\n      books.find(b => b.id === bookID)\n    );\n    mem.push({\n      id: input.id,\n      books: bookArray\n    });\n    return mem;\n  }, []);\n\nexport { getCategoriesWithBooks };\n","import React from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { useAuthContext } from \"setup/AuthProvider\";\nimport { Home, Discovery, Book } from \"pages\";\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const { authData } = useAuthContext();\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        authData.user_id ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/\",\n              state: { from: props.location }\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nconst Router = () => (\n  <Switch>\n    <Route exact path=\"/\" component={Home} />\n    <PrivateRoute path=\"/discovery\" component={Discovery} />\n    <PrivateRoute path=\"/book/:id\" component={Book} />\n    <Route path=\"*\" component={() => \"NOT FOUND\"} />\n  </Switch>\n);\n\nexport default Router;\n","import styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  display: flex;\n`;\n\nconst MainContent = styled.div`\n  flex: 1 0 100%;\n  padding-top: 74px;\n`;\n\nexport { Wrapper, MainContent };\n","import React, { Fragment } from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Chip from \"@material-ui/core/Chip\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\nimport { Wrapper, MainContent } from \"./styles\";\nimport { useAuthContext } from \"setup/AuthProvider\";\n\nconst Frame = ({ children }) => {\n  const { authData, onLogout } = useAuthContext();\n  return (\n    <Wrapper>\n      <CssBaseline />\n      <AppBar color=\"default\" elevation={0}>\n        <Container maxWidth=\"md\">\n          <Toolbar>\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\n              Curator{\" \"}\n              {authData.user_id && <Chip label={authData.access_type} />}\n            </Typography>\n            {authData.user_id ? (\n              <Fragment>\n                <Button component={RouterLink} to=\"/discovery\">\n                  Discovery\n                </Button>\n                <Button onClick={onLogout}>Logout</Button>\n              </Fragment>\n            ) : (\n              <Button component={RouterLink} to=\"/\">\n                Login\n              </Button>\n            )}\n          </Toolbar>\n        </Container>\n      </AppBar>\n      <MainContent>\n        <Container maxWidth=\"md\">{children}</Container>\n      </MainContent>\n    </Wrapper>\n  );\n};\n\nexport default Frame;\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\nimport AuthProvider from \"./setup/AuthProvider\";\nimport theme from \"setup/theme\";\nimport Router from \"setup/Router\";\nimport Frame from \"components/Frame\";\n\nfunction App() {\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <Frame>\n            <Router />\n          </Frame>\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport AppWrapper from \"./AppWrapper\";\n\nReactDOM.render(<AppWrapper />, document.getElementById(\"root\"));\n"],"sourceRoot":""}